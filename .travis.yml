language: java
jdk:
  - openjdk8

cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

before_install:
  - sudo apt-get install -y awscli

install: true

script:
  - ./gradlew build

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

deploy:
  provider: releases
  file_glob: true
  file: build/distributions/*
  skip_cleanup: true
  on:
    tags: true
  api-key:
    secure: vRo9MawRsHATl6qkXUc8sIjC8NWJqqSbL1qv8eD8oKgaCUInRTcp8WqFkyFhPcn/Nkdkzfsxu8KWRUN5/lL0ZAFdntEbbVdo6S1+16BHUyRTwTATQO3tJLyAtm3wJ74VYTiUNwqfyu3k7aq7H866nkRG82gKVqH7fSmiu0LKnTp2PHSrMVyfKff4wPIXdn03CkqoDoTVT0GkFvej1k9vPy2VGtCGW4NA+YovHMMNv4vDHB+qXEqShhcpBdrSn5UTQF7K1dGczqiJdEl+NFQgigyndGmqZO1qYMxSRP3w+Z7rBmP4YH9vwi3cYiV09282QH8C5QKj1ffWEc5wNbB/Iz6L1EF5QyDDMPxOaI7A3jIuzaSdOT0MSPr2xzf+KYksRufimRpN+rYu63PGeOxdJDg2EZmfxV7Z1uDyXWRDv+sA7zBDVB2wTNkZ20b5mwd1jOLWeOslFA8E6RCLDKlhdgLE+3agRs9uIKqWyvCJHw7YVHYovC4x88mkG3GicLsRRma6mSA0P8aiPA3mQwvAbKXrENiipqOPaBUqVvL2ac8Laf9Dpnr+ovp0b/UgWk+8TF4FYh397Aw0TXs6/wry2KqfTzMr/HU4pMokpKohZSGSqiqa9ygILpZ2PSADxkV45hVH040XHH8Csois4fl/n/SbubjUMMDtpDD5FU/Qq00=
